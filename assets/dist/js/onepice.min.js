/**
 * onepice - this is a simple theme for ghost
 * @version 1.1.0
 * @link    https://github.com/guovz/onepice#readme
 * @author  Jaylin Wang (http://guovz.com)
 * @license MIT
 */"use strict";var updateCounter=function(t){var e=new AV.Query("Counter");e.equalTo("url",location.pathname),e.first().then(function(e){if(e)e.set("time",e.get("time")+1),e.save().then(function(t){console.log("update a counter:"+t.get("url"))},function(t){console.log("Error: "+t.code+" "+t.message)});else{var o=new t;o.set("url",location.pathname),o.set("time",1),o.save().then(function(t){console.log("add a counter:"+t.get("url"))},function(t){console.log("Error: "+t.code+" "+t.message)})}},function(t){console.log("Error: "+t.code+" "+t.message)})},showTime=function(t){var e=new AV.Query("Counter");$(".visit").each(function(){var t=$(this).data("url"),o=$(this);e.equalTo("url",t),e.first().then(function(t){var e=0;t&&(e=t.get("time")),o.find(".visit-count").text(e)},function(t){console.log("Error: "+t.code+" "+t.message)})})};!function(t){if(hljs.initHighlightingOnLoad(),t.get(ghost.url.api("posts",{fields:"id"})).done(function(e){var o=e.posts.length;t('[data-toggle="postcount"]').text(o)}).fail(function(t){console.log(t)}),t.get(ghost.url.api("tags",{fields:"id"})).done(function(e){var o=e.tags.length;t('[data-toggle="tagcount"]').text(o)}).fail(function(t){console.log(t)}),t.get(ghost.url.api("users/1")).done(function(e){var o=e.users[0];t('[data-toggle="userimage"]').attr("src",o.image),t('[data-toggle="username"]').text(o.name),t('[data-toggle="userlocation"]').text(o.location),t('[data-toggle="userbio"]').text(o.bio)}).fail(function(t){console.log(t)}),onepice_config.leancloud){AV.init(onepice_config.leancloud),t(".visit-wrapper").show();var e=AV.Object.extend("Counter");updateCounter(e),showTime(e)}console.log(t(".widget-excerpt .more").closest("p").nextAll().remove())}(jQuery),function(t){var e='[data-toggle="totop"]',o='[data-toggle="sidebar"]',n='[data-toggle="menu"]',a=function(){t("html, body").animate({scrollTop:0},200)},i=function(){t("body").toggleClass("fold")},l=function(e){var o=t(e.target).closest('[data-toggle="menu"]'),n=t(o.data("target"));n.toggleClass("open")};t(document).on("click.totopToggle",e,a),t(document).on("click.sidebarToggle",o,i),t(document).on("click.menuToggle",n,l)}(jQuery);